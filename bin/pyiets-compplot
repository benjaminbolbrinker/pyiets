#!/usr/bin/env python3
import sys
import csv
import numpy as np
import matplotlib.pyplot as plt


if __name__ == '__main__':
    filename1 = sys.argv[1]
    filename2 = sys.argv[2]
    savepic = sys.argv[3]

    with open(filename1, 'r') as fp:
        reader = csv.reader(fp, delimiter=" ")
        ncols = len(list(reader)[0])

    if ncols == 4:
        iets1 = np.loadtxt(filename1, dtype={
            'names': ('mode_idx', 'wavenumber', 'energy', 'intensity'),
            'formats': ('i8', 'f8', 'f8', 'f8')
        })
        plt.stem(iets1['wavenumber'], iets1['intensity'])

    if ncols == 8:
        iets1 = np.loadtxt(filename1, dtype={
            'names': ('mode_idx', 'wavenumber', 'energy', 'intensity_tot',
                      'intensity_uu', 'intensity_du',
                      'intensity_ud', 'intensity_dd'),
            'formats': ('i8', 'f8', 'f8', 'f8', 'f8', 'f8', 'f8', 'f8')
        })
        plt.stem(iets1['wavenumber'], iets1['intensity_uu'])
        plt.stem(iets1['wavenumber'], iets1['intensity_dd'])

    with open(filename2, 'r') as fp:
        reader = csv.reader(fp, delimiter=" ")
        ncols = len(list(reader)[0])

    if ncols == 4:
        iets2 = np.loadtxt(filename2, dtype={
            'names': ('mode_idx', 'wavenumber', 'energy', 'intensity'),
            'formats': ('i8', 'f8', 'f8', 'f8')
        })
        plt.stem(iets2['wavenumber'], -iets2['intensity'])

    if ncols == 8:
        iets2 = np.loadtxt(filename2, dtype={
            'names': ('mode_idx', 'wavenumber', 'energy', 'intensity_tot',
                      'intensity_uu', 'intensity_du',
                      'intensity_ud', 'intensity_dd'),
            'formats': ('i8', 'f8', 'f8', 'f8', 'f8', 'f8', 'f8', 'f8')
        })
        plt.stem(iets2['wavenumber'], -iets2['intensity_dd'])
        plt.stem(iets2['wavenumber'], -iets2['intensity_dd'])

    plt.savefig(savepic)
